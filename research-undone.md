# 声明
根据 `米哈游游戏使用许可及服务协议` 第九条：
除非本协议另有约定，否则，未经米哈游事先书面同意，用户不得实施下列行为（无论是营利的还是非营利的）：
> 1. 复制、翻录、反编译（de-compile）、反汇编（disassemble）、传播和陈列米哈游游戏软件的程序、使用手册和其它图文音像资料的全部或部分内容，或对米哈游游戏软件的任何功能或程序进行反向工程（reverse engineering）；
> 2. 公开展示和播放米哈游游戏，及/或米哈游游戏服务的全部或部分内容；(3)出租、销售米哈游游戏及/或利用米哈游游戏从事任何营利或非营利行为；(4)修改或遮盖米哈游游戏程序、图像、动画、包装和手册等内容上的服务名称、公司标志、商标（或）版权信息、其他知识产权声明等内容；及/或(5)其它违反商标法、著作权法、计算机软件保护条例和相关法律法规、任何可适用的国际条约的行为。

本文档以及关于 `Re-Shenzhou-Broken-Sword-Legend` 的所有产物**仅供本人使用，不向任何人公开，并积极遵守`米哈游游戏许可及服务协议`。**
## 主观意见声明
我真的很喜欢神州折剑录。赤鸢在500年前的那些过往我心痛的不得了，素裳和罗刹的那些事情偶尔会心一笑。它对我整个人后续的影响是巨大的，它们在精神世界中才不是冰冷冷的图片、音频或者一个XML标签，这些只是表现它的方法，只是一种媒介。
> 神州折剑录
# chap.contents.xml 分析
# `<scene>`
- 作用: 每一折中的场景，包括子场景。
- 父标签: `<scripts>`
### `id=""`
- 作用: 场景的ID
- 类型: `number`
- 必须: 是
### `title=""`
- 作用: 场景的标题
- 类型: `string`
- 必须: 否
### `prev=""`
- 作用: 这个场景的前一个场景ID
- 类型: `number`
- 必须: 否
### `type=""`
- 作用: 场景的类型，如果为`block`，就说明是一个子场景。
- 类型: `string`
- 必须: 否
### `root=""`
- 作用: 是否为根场景
- 类型: `bool`
- 必须: 否
# `<mono>`
- 作用: 包含一段旁白文字，没有角色说明，如果只有一行，可以不需要`<p>`标签
- 父标签: `<scene>`
- 子标签: `<p>`
### `pageend=""`
- 作用: 是否继续在页面中显示，如果为`true`则下一次`<mono>`会在新的页面中显示
- 类型: `bool`
- 必须: 否
### `inline=""`
- 作用: 不换行显示本次文本，如果为`true`则文本上一个`<mono>`的文本后显示，`pageend=""`必须为`false`或没有。相当于继续显示文本。
- 类型: `bool`
- 必须: 否
### `chara=""`
- 作用: ???
- 类型: `string`
- 必须: 否
# `<p>`
- 作用: 与多个`<p>`标签连用，实现多行文本
- 父标签: `<mono>` `<text>`
- 子标签: `[em]` `[\s]`
- 必须: 否
## `[em]`
- 作用: 在`<p>`标签的内容中更改被`[em]`包裹的文本的样式
- 父标签: `<p>`
- 必须: 否
### `line`
- 作用: 删除线
- 必须: 否
### `italic`
- 作用: 斜体
- 必须: 否
### `action=`
- 作用: 文本的动作
- 类型: `string`
- - `shake`: 震动
- 必须: 否
### `duration=`
- 作用: 与`action=`一同使用，表示动作的持续时间，单位为秒
- 类型: `number`
- 必须: 否
### `range=`
- 作用: 与`action=`一同使用，表示动作范围
- 类型: `number`
- 必须: 否
### `looptimes=`
- 作用: 与`action=`一同使用，表示动作重复次数，如果为`-1`表示无限循环
- 类型: `number`
- 必须: 否
### `size=`
- 作用: 设置文本大小
- 类型: `number`
- 必须: 否
## `[\s]`
- 作用: 暂停当前文本，点击后继续显示，类似于`<mono inline="true" />`
# `<text>`
- 作用: 与`<dialog>`类似，但不指定任何人物的对话，相当于旁白。
- 父标签: `<scene>`
### `inline=""`
- 作用: 不换行显示本次文本，如果为`true`则文本上一个`<text>`的文本后显示，相当于继续显示文本
- 类型: `bool`
- 必须: 否
# `<dialog>`
- 作用: 人物对话
- 父标签: `<scene>`
### `chara=""`
<!-- - 作用: 指定在`resources.xml`中`<chara>`标签下`rel=""`的标签中`src=""`或`src_os=""`的链接的图片为当前对话人物的图片 -->
- 作用: 指定在`resources.xml`中`<c>`标签下`id=""`的标签中`name=""为当前人物的名字，并指定其标签`color=""`属性为对话文本的颜色，格式为`HEX`
- 类型: `string`
- 必须: 是
# `<se>`
- 作用: 播放`resources.xml`中 `<se>`标签的`id=""`的标签中`src=""`或`src_os=""`的音效链接
- 父标签: `<scene>`
### `id=""`
- 作用: `resources.xml`中 `<se>`标签的`id=""`的标签的ID
- 类型: `number`
- 必须: 是
### `looptimes=""`
- 作用: 设置音效循环次数，如果为`-1`则无限循环，如果为`0`则关闭，如果未指定则播放一次
- 类型: `number`
- 必须: 否
# `<bgm>`
- 作用: 播放`resources.xml`中 `<bgm>`标签的`id=""`的标签中`src=""`或`src_os=""`的背景音乐链接
- 父标签: `<scene>`
### `id=""`
- 作用: `resources.xml`中 `<bgm>`标签的`id=""`的标签的ID
- 类型: `number`
- 必须: 否
### `looptimes=""`
- 作用: 指定背景音乐播放次数，如果为`0`则关闭背景音乐，不指定`looptimes`即代表重复播放
- 类型: `number`
- 必须: 否
# `<bg>`
- 作用: 设置`resources.xml`中 `<bg type="bg">`标签的`id=""`的标签中`src=""`的图片链接为当前背景图片
- 父标签: `<scene>`
### `id=""`
- 作用: `resources.xml`中 `<bg>`标签的`id=""`的标签的ID
- 类型: `string`
- 必须: 是
### `duration=""`
- 作用: 指定背景图片之间的渐变过渡时长
- 类型: `number`
- 必须: 否
### `origin=""`
- 作用: 配合`scale=""`使用，设置背景的展示位置，暂时未找到具体作用 ???
- 类型: `string`
- 格式: `number%,number%`
- 必须: 否
### `scale=""`
- 作用: 设置背景的图片缩放
- 类型: `number`
- 必须: 否
# `<delay>`
- 作用: 延迟
- 父标签: `<scene>`
### `t=""`
- 作用: 延迟时间，单位为秒
- 类型: `number`
- 必须: 是
# `<transition>` 
- 作用: 普通的颜色过度效果
- 父标签: `<scene>`
### `in=""`
- 作用: 过渡效果进入时间，单位为秒
- 类型: `number`
- 必须: 是
### `stop=""`
- 作用: 过渡效果停留时间，单位为秒
- 类型: `number`
- 必须: 是
### `out=""`
- 作用: 过渡效果退出时间，单位为秒
- 类型: `number`
- 必须: 是
### `color=""`
- 作用: 过渡效果的颜色，不会影响`mode="move"`的黑边颜色，格式为`HEX`
- 类型: `string`
- 必须: 是
### `mode=""`
- 作用: 过渡效果的类型
- 类型: `string`
- - `fade`: 渐变过渡
- - `dissolve`: 类似墨水点入纸的过渡
- - `clock`: 类似时钟的过渡
- - `halo`: 圆形渐变扩散动画
- - `move`: 类似翻书动画
- - `shutter`：类似百叶窗的过渡
- 必须: 是
### `direction=""`
- 作用: 与 `mode="move"` 搭配使用，表示过渡效果来自的方向
- 类型: `string`
- - `left`: 从左至右
- - `right`: 从右至左
- 必须: 否
### `custom=""`
- 作用: 高级自定义过渡效果
- 类型: `string`
- - `thick`: 与`mode="move"`搭配使用 ??? *目前可能会使过渡效果没有中间停留的短暂时间*
- 必须: 否
# `<event>`
- 作用: 执行事件操作
- 父标签: `<scene>`
### `action=""`
- 作用: 指定执行操作的名称
- 类型: `string`
- - `hide_ui`: 隐藏阅读控件
- - `show_ui`: 显示阅读控件
- - `goto`: 前往场景
- - `achievement`: 获得成就
- 必须: 是
### `duration=""`
- 作用: 指定事件操作时长，单位为秒
- 类型: `number`
- 必须: 否
### `to=""`
- 作用: 与`action="goto"`搭配使用，指定前往的场景的`id`
- 类型: `string`
- 必须: 否
### `aid=""`
- 作用: 与`action="archivement"`搭配使用，指定获得的成就的`id`
- 类型: `string`
- - `8300c8e546c9292b`: 传略馆解锁：「李素裳」
- 必须: 否
# `<cg>`
- 作用: 设置`resources.xml`中 `<cg>`标签的`img=""`的标签中`src=""`的图片链接为当前CG背景图片，相当于第二层背景。如果没有任何参数，则关闭CG层。
- 父标签: `<scene>`
### `img=""`
- 作用: `resources.xml`中 `<cg>`标签的`src=""` 如果没有指定，则CG为纯黑背景
- 类型: `string`
- 必须: 否
### `duration=""`
- 作用: 指定cg过渡时长
- 类型: `number`
- 必须: 否
### `origin=""`
- 作用: 配合`scale=""`使用，设置cg的展示位置，暂时未找到具体作用
- 类型: `string`
- 格式: `number%,number%`
- 必须: 否
### `pos=""`
- 作用: 指定cg显示的位置，与上一个`<cg>`搭配使用，相当于移动动画
- 类型: `string`
- 格式: `x, y`
### `scale=""`
- 作用: 设置cg的图片缩放
- 类型: `number`
- 必须: 否
# `<motion>`
- 作用: 多类型动画
- 父标签: `<scene>`
### `chara=""`
- 作用: 在`resources.xml`中`<chara>`标签下`rel=""`的标签中`src=""`或`src_os=""`的链接的图片为当前对话人物的图片 ???
- 类型: `number`
- - `-4`: *目前已知可以使除人物显示以外的动画生效的参数*
- 必须: 是
### `img=""`
- 作用: 与`chara=""`搭配使用，指定在`resouces.xml`中其标签的`img=""`下的`src=""`或`src_os=""`的链接的图片为当前对话人物的图片
- 类型: `string`
- 必须: 否
### `action=""`
- 作用: 指定动画类型
- 类型: `string`
- - `shake`: 抖动
- - `show`: 渐显
- - `hide`: 隐藏
- - `img_trans`: 将上一个图片渐隐后渐显进行过渡
- 必须: 是
### `duration=""`
- 作用: 指定与上一个动画之间过渡的时间或`action="show"`与`hide`的渐变时间
- 类型: `number`
- 必须: 是
### `range=""`
- 作用: 指定动画路径范围
- 类型: `number`
- 必须: 否
### `pos=""`
- 作用: 指定角色显示的位置
- 类型: `string`
- - `x, y`
- - `left`: 左
- - `right`: 右
- - `center`: 中间
- 必须: 否
### `direction=""`
- 作用: 指定动画路径方向
- 类型: `string`
- - `horizontal`: 水平移动
- - `vertical`: 垂直移动
- - `default`: ??? *默认*
- 必须: 是
### `delay=""`
- 作用：指定动画延迟时间，并继续执行后面的操作
- 类型: `number`
- 必须: 否
### `reversex=""`
- 作用: ???
# `<letterbox>`
- 作用: 背景遮罩（黑边）
- 父标签: `<scene>`
### `action=""`
- 作用: 设置遮罩操作
- 类型: `string`
- - `show_letterbox`: 显示遮罩层
- - `hide_letterbox`: 隐藏遮罩层
- 必须: 是
### `height=""`
- 作用: 设置遮罩层高度，相当于上下两边的黑边高度
- 类型: `number`
- 必须: 否
### `duration=""`
- 作用: 设置遮罩层动画时长，如果是第一个遮罩层，则动画类型为`从中间打开`，如果是第n个遮罩层，则动画类型相当于`移动、扩张黑边`
- 类型: `number`
- 必须: 是
# `<notification>`
- 作用: 显示左上角消息 *计划在 Re 版本中与 <event action="archivement"> 包含在一起*
- 父标签: `<scene>`
